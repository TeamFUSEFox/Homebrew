local termWidth, termHeight = term.getSize()
local selectedItem = 1
local onMainMenu = true
 
function install()
 term.clear()
 term.setCursorPos(1,1)
 print("Initializing...")
 sleep(3.1)
 print("Preparing for installation...")
 sleep(5)
 print("Removing required files if they currently exist on your computer...")
 shell.run("rm homebrew")
 shell.run("rm .fusionos")
 shell.run("rm games")
 shell.run("rm pastebin")
 shell.run("rm hello")
 shell.run("rm goodbye")
 shell.run("rm startup")
 shell.run("rm shell")
 shell.run("rm format")
 sleep(2)
 print("Installing FusionOS files...")
 sleep(1)
 shell.run("mkdir .fusionos")
 shell.run("pastebin get JJfuJrdB homebrew")
 shell.run("homebrew get qD58vWVn pastebin")
 shell.run("homebrew get Jmpam2Kv hello")
 shell.run("homebrew get CiKyAusa format")
 shell.run("homebrew get ZWA3qjjV startup")
 shell.run("homebrew get Ux6SYP85 shell")
 shell.run("homebrew get UeTBkXyV system")
 shell.run("homebrew get ZRhTRGF0 info")
 shell.run("clear")
 print("Installation finished.")
 sleep(3)
 print("Would you like to install the FUSEFox Gamepack?")
 --here we go
 local termWidth, termHeight = term.getSize()
local selectedItem = 1
local onMainMenu = true
 
function yes()
 term.clear()
 term.setCursorPos(1,1)
 shell.run("homebrew run 2Q3N32gy")
 shell.run("clear")
 print("Installation finished.")
 sleep(1)
 print("Rebooting...")
 sleep(1)
 os.reboot()
end

function no()
 print("Installation finished.")
 sleep(1)
 print("Rebooting...")
 sleep(1)
 os.reboot()
end
 
mainMenu = {
[1] = { text = "Yes", handler = yes }, 
[2] = { text = "No", handler = no },

}
 
function printMenu( menu )
 print("Would you like to install the FUSEFox Gamepack?")
 for i=1,#menu do
  if i == selectedItem then
   print(">> "..menu[i].text)
  else
   print("   "..menu[i].text)
  end
 end
end
 
function onKeyPressed( key, menu )
 if key == keys.enter then
  onItemSelected(menu)
 elseif key == keys.up then
  if selectedItem > 1 then
   selectedItem = selectedItem - 1
  end
 elseif key == keys.down then
  if selectedItem < #menu then
   selectedItem = selectedItem + 1
  end
 end
end
 
function onItemSelected( menu )
 menu[selectedItem].handler()
end
 
function main()
 while onMainMenu do
  term.clear()
  term.setCursorPos(1,1)
  printMenu(mainMenu)
  event, key = os.pullEvent("key")
  onKeyPressed(key,mainMenu)
 end
end
 
main()
end

function Exit()
 print("Run the installer again when you want to install.")
 sleep(2)
 onMainMenu = false
end
 
mainMenu = {
[1] = { text = "Install Now", handler = install },
[2] = { text = "Exit", handler = Exit }
}
 
function printMenu( menu )
 print("FusionOS v1.1 and The Homebrew Launcher v1.2")
 print("Ready to install...")
 for i=1,#menu do
  if i == selectedItem then
   print(">> "..menu[i].text)
  else
   print("   "..menu[i].text)
  end
 end
end
 
function onKeyPressed( key, menu )
 if key == keys.enter then
  onItemSelected(menu)
 elseif key == keys.up then
  if selectedItem > 1 then
   selectedItem = selectedItem - 1
  end
 elseif key == keys.down then
  if selectedItem < #menu then
   selectedItem = selectedItem + 1
  end
 end
end
 
function onItemSelected( menu )
 menu[selectedItem].handler()
end
 
function main()
 while onMainMenu do
  term.clear()
  term.setCursorPos(1,1)
  printMenu(mainMenu)
  event, key = os.pullEvent("key")
  onKeyPressed(key,mainMenu)
 end
end
 
main()
